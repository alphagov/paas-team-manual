<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport">

    <title>PaaS Team Manual</title>

    <!--[if gt IE 8]><!--><link href="../../stylesheets/screen.css" rel="stylesheet" media="screen" /><!--<![endif]-->
    <!--[if lte IE 8]><link href="../../stylesheets/screen-old-ie.css" rel="stylesheet" media="screen" /><![endif]-->

    <link rel="canonical" href="https://team-manual.cloud.service.gov.uk/architecture_decision_records/ADR029-aiven-project-structure/">


    <link href="../../stylesheets/print.css" rel="stylesheet" media="print" />
    <script src="../../javascripts/application.js"></script>

      <meta property="og:image" content="https://team-manual.cloud.service.gov.uk/images/govuk-large.png" />
      <meta property="og:site_name" content="PaaS Team Manual" />
      <meta property="og:type" content="object" />
      <meta property="og:url" content="https://team-manual.cloud.service.gov.uk/architecture_decision_records/ADR029-aiven-project-structure/" />
      <meta property="twitter:card" content="summary" />
      <meta property="twitter:domain" content="team-manual.cloud.service.gov.uk" />
      <meta property="twitter:image" content="https://team-manual.cloud.service.gov.uk/images/govuk-large.png" />
      <meta property="twitter:title" content="PaaS Team Manual" />
      <meta property="twitter:url" content="https://team-manual.cloud.service.gov.uk/architecture_decision_records/ADR029-aiven-project-structure/" />
  </head>

  <body>
    <div class="app-pane">
      <div class="app-pane__header toc-open-disabled">
        <a href="#content" class="skip-link">Skip to main content</a>

        <header class="header header--full-width">
  <div class="header__container">
    <div class="header__brand">
        <a href="https://team-manual.cloud.service.gov.uk">
        <span class="header__title">
          PaaS Team Manual
            <span class="phase-banner">Internal</span>
        </span>
        </a>
    </div>

  </div>
</header>

      </div>

      <div id="toc-heading" class="toc-show fixedsticky">
        <a href="#toc" class="toc-show__label js-toc-show" aria-controls="toc">
          Table of contents <span class="toc-show__icon"></span>
        </a>
      </div>

      <div class="app-pane__body" data-module="in-page-navigation">
        <div class="app-pane__toc">
          <div class="toc" data-module="table-of-contents">
            <a href="#" class="toc__close js-toc-close" aria-controls="toc" aria-label="Hide table of contents"></a>
            <nav id="toc" class="js-toc-list toc__list" aria-labelledby="toc-heading">
              <ul>
  <li>
    <a href="#adr029-aiven-project-structure">ADR029: Aiven project structure</a>
    <ul>
      <li>
        <a href="#context">Context</a>
      </li>
      <li>
        <a href="#decision">Decision</a>
      </li>
      <li>
        <a href="#status">Status</a>
      </li>
      <li>
        <a href="#consequences">Consequences</a>
      </li>
    </ul>
  </li>
</ul>

            </nav>
          </div>
        </div>

        <div class="app-pane__content toc-open-disabled">
          <main id="content" class="technical-documentation" data-module="anchored-headings">
              <div class="page-banner">
    <p>This is for internal use by the PaaS team. Public-facing documentation is located at <a href="https://docs.cloud.service.gov.uk">docs.cloud.service.gov.uk</a>.</p>
  </div>

  <h1 id="adr029-aiven-project-structure">ADR029: Aiven project structure</h1><h2 id="context">Context</h2>
<p>Aiven provides hosted Elasticsearch for the Elasticsearch backing service.</p>

<p>The PaaS has several environments which will need to use Aiven. These
environments should be isolated from each other so that changes made in testing
and development environments do do not affect production users.</p>

<p>Aiven provide a &ldquo;Project&rdquo; abstraction where a user can be a member of several
projects. API tokens are user specific. By creating one user per project it&rsquo;s
possible to scope API tokens to a project.</p>
<h2 id="decision">Decision</h2>
<p>We&rsquo;ll use separate projects for separate environments, initially using the
following Aiven projects:</p>

<ul>
<li>ci-testing (for the CI environment for the elasticsearch broker itself)</li>
<li>paas-cf-dev</li>
<li>paas-cf-staging</li>
<li>paas-cf-prod</li>
</ul>

<p>For staging and prod we will use separate API tokens within the same project to
separate credentials between the London and Ireland regions.</p>

<p>We will have the following per-project users to hold API tokens:</p>

<p>the-multi-cloud-paas-team+aiven-ci@digital.cabinet-office.gov.uk
the-multi-cloud-paas-team+aiven-dev@digital.cabinet-office.gov.uk
the-multi-cloud-paas-team+aiven-staging@digital.cabinet-office.gov.uk
the-multi-cloud-paas-team+aiven-prod@digital.cabinet-office.gov.uk</p>

<p>The credentials for the ci and dev users will be stored in the
<code>paas-credentials</code> passwordstore. staging and prod will be stored in
<code>paas-credentials-high</code>.</p>

<p>Members of the PaaS team will each have their own user which will have access
all of the projects for management purposes.</p>
<h2 id="status">Status</h2>
<p>Accepted</p>
<h2 id="consequences">Consequences</h2>
<p>Members of the PaaS team will need their own Aiven accounts.</p>

<p>The Aiven credentials of the four service users will be managed in the PaaS
team&rsquo;s passwordstores.</p>

<p>We will be able to interact with elasticsearch on a given environment without
risk of affecting other environments.</p>


            
          </main>


          <footer class="footer">
  <div class="footer__licence">
    <a class="footer__licence-logo" href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/" rel="license">Open Government Licence</a>
    <p class="footer__licence-description">All content is available under the <a href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/" rel="license">Open Government Licence v3.0</a>, except where otherwise stated</p>
  </div>

  <div class="footer__copyright">
    <a class="footer__copyright-logo" href="http://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/copyright-and-re-use/crown-copyright/">Â© Crown copyright</a>
  </div>
</footer>

        </div>
      </div>
    </div>

    
  </body>
</html>
